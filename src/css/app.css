/**
 * FILE: app.css
 * DESCRIPTION:
 * - Defines optional styles
 */

/* =================================================================
 # IMPORTS
 ================================================================= */

/* Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Geist+Mono:wght@100..900&family=Gloock&display=swap');

/* Tailwind */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===============================================================
 # SHARED CLASSES
 ================================================================= */

/**
 #
 # GENERAL CLASSES
 #
 */

/* Body */
body {
  @apply overflow-x-hidden bg-background min-h-screen flex flex-col justify-center items-center font-body text-textPrimary;
}

/* Main */
main {
  @apply
  flex flex-col gap-20 py-32 pb-48 text-center sm:mx-4;
}

/* Red links */
.link {
  @apply text-accent hover:underline hover:underline-offset-4;
}

/* Buttons (general) */
.btn {
  @apply bg-foreground w-fit px-5 py-2 rounded-round hover:bg-accent transition transform hover:scale-[1.02];
}

.btn-float {
  @apply bg-textPrimary text-black w-fit px-5 py-2 rounded-round hover:bg-accent hover:text-textPrimary transition transform hover:scale-[1.02];
}

/* Span text */
.span {
  @apply text-accent group-hover:text-textPrimary transition;
}

/* Form heading for major sections (e.g. Basic, Attributes) */
main h2 {
  @apply font-heading text-4xl mb-7;
}

/* Form heading for subsections (e.g. Disciplines, Backgrounds) */
main h3 {
  @apply font-heading text-3xl mb-7;
}

/* Form heading for parts of subsections (e.g.Physcial/Mental/Social) */
main h4 {
  @apply font-heading text-2xl mb-5;
}

/**
 #
 # HEADER CLASSES
 #
 */

/* Header/topbar */
.header {
  @apply bg-foreground absolute top-0 w-full h-14 flex justify-between items-center px-5 sm:h-16 lg:px-10;
}

/* Header text */
.header p {
  @apply text-xs text-textSecondary mt-1 sm:text-base sm:mt-2;
}

/**
 #
 # FORM CLASSES
 #
 */

/**
 # FORM LABELS
 */

/* Form labels */
.label {
  @apply flex flex-col text-xs text-start text-textSecondary;
}

/**
 # FORM ELEMENTS (INPUTS, TEXTFIELDS, DROPDOWNS, ETC)
 */

/* Form textfields */
.textfield {
  @apply bg-foreground text-base text-textPrimary placeholder:text-textSecondary mt-1 py-3 px-4 rounded-round transition border border-transparent hover:scale-[1.02] focus:border-accent focus:outline-none focus:ring-0 focus:scale-[1.02];
}

/* Custom attribute for [Abilities] */
.textfield-custom {
  @apply max-w-40 bg-foreground text-sm text-center text-textPrimary placeholder:text-textSecondary py-1 px-4 rounded-round transition border border-transparent hover:scale-[1.02] focus:border-accent focus:outline-none focus:ring-0 focus:scale-[1.02];
}

/* Form dropdowns */
.dropdown {
  @apply bg-foreground text-base mt-1 py-[0.95rem] px-4 rounded-round transition border border-transparent hover:scale-[1.02] focus:border-accent focus:outline-none focus:ring-0 focus:scale-[1.02];
}

/* Custom dropdown for [Disciplines]/[Backgrounds]/[Path] */
.dropdown-custom {
  @apply bg-foreground text-sm text-center py-1 px-4 rounded-round transition border border-transparent hover:scale-[1.02] focus:border-accent focus:outline-none focus:ring-0 focus:scale-[1.02];
}

/* wrapper for dot + label (elements including dots) */
.dots {
  @apply flex flex-col items-center gap-2 text-sm text-textSecondary transition hover:text-textPrimary;
}

.dots-custom {
  @apply flex flex-col items-center gap-2 text-sm text-textSecondary transition hover:text-textPrimary hover:text-textSecondary;
}

/* Wrapper for dots */
.dot-group {
  @apply flex justify-center gap-3;
}

/* Un-filled dot */
.dot {
  @apply w-5 h-5 rounded-full border border-textSecondary bg-transparent transition duration-200 hover:border-accent hover:scale-[1.12];
}

/* FIlled-in dot */
.dot.filled {
  @apply border-textPrimary bg-textPrimary;
}

/**
 # FORM LAYOUT
 */

/* Dot-wrapper (label w/ dot-group) from 1 column to 3 */
.dots-wrapper {
  @apply grid gap-5 sm:grid-cols-1;
}

/* ===============================================================
 # DYNAMIC ROW STYLES (Add/Remove Buttons)
 ================================================================= */

/* The remove button ('-') for all dynamic rows.*/
.btn-minus {
  @apply flex-shrink-0 
         bg-foreground text-textSecondary text-lg font-bold rounded-round
         cursor-pointer
         w-8 opacity-0 scale-50 px-2.5 /* Always reserve the width and padding */
         overflow-hidden 
         group-hover:opacity-100 group-hover:scale-100 /* Only animate opacity and scale */
         hover:!bg-accent hover:!text-textPrimary 
         transition-all duration-300 ease-in-out;
}

/* ===============================================================
 # FREEBIE MODE STYLES
 ================================================================= */

/* By default, the Merits/Flaws section is disabled. */
#merits-flaws-section {
  pointer-events: none;
  opacity: 0.5;
  transition: opacity 0.3s ease-in-out;
}

/* When freebie mode is active, the LOCKS ARE INVERTED. */

/* 1. Re-enable the Merits/Flaws section */
.freebie-mode-active #merits-flaws-section {
  pointer-events: auto;
  opacity: 1;
}

/* --- NEW RULE TO FIX THE BUTTONS --- */
/* Specifically re-enable the 'add' buttons INSIDE the now-active merits/flaws section */
.freebie-mode-active #merits-flaws-section [id^="add-"] {
  pointer-events: auto; /* Let the mouse click it */
  opacity: 1; /* Make it fully visible */
}

/* 2. Lock ONLY the truly immutable elements during Freebie Mode. */
.freebie-mode-active #basics-section,
.freebie-mode-active #attributes-section select, /* Priority dropdowns */
.freebie-mode-active #abilities-section select,  /* Priority dropdowns */
.freebie-mode-active select[name="clan"],
.freebie-mode-active select[name="generation"],
.freebie-mode-active #humanity-section select[name="paths"] {
  pointer-events: none;
  opacity: 0.5;
  transition: opacity 0.3s ease-in-out;
}

/* 3. Style for dots filled with freebie points */
.dot.filled-freebie {
  @apply border-accent bg-accent;
}
